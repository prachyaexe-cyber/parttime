<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á Full-Time</title>
<style>
    body { font-family: sans-serif; max-width: 850px; margin: auto; padding: 20px; }
    input, select, button { padding: 6px; margin: 4px 0; font-size: 16px; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #999; padding: 6px; text-align: center; }
    .row { display: flex; gap: 10px; }
    .col { flex: 1; }
</style>
</head>
<body>

<h2>‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á Full-Time (‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 500 ‡∏ö‡∏≤‡∏ó)</h2>

<div class="row">
    <div class="col">
        ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:<br>
        <input type="date" id="workDate">
    </div>
    <div class="col">
        ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤:<br>
        <input type="text" id="startTime" placeholder="‡πÄ‡∏ä‡πà‡∏ô 08:00" maxlength="5">
    </div>
    <div class="col">
        ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å:<br>
        <input type="text" id="endTime" placeholder="‡πÄ‡∏ä‡πà‡∏ô 17:00" maxlength="5">
    </div>
    <div class="col">
        OT:<br>
        <select id="otRate">
            <option value="0">‡πÑ‡∏°‡πà‡∏ó‡∏≥ OT</option>
            <option value="1.5">1.5</option>
            <option value="2.0">2.0</option>
            <option value="2.25">2.25</option>
        </select>
    </div>
</div>

<button onclick="saveRecord()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>

<h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h3>
<table id="recordTable">
    <thead>
        <tr>
            <th>‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤</th>
            <th>‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</th>
            <th>OT</th>
            <th>‡∏£‡∏ß‡∏°(‡∏ö‡∏≤‡∏ó)</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<button onclick="exportCSV()">üìÅ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î CSV</button>

<h3>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏ß‡∏°</h3>
<p id="summary">‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: 0 ‡∏ß‡∏±‡∏ô / OT: 0 ‡∏ä‡∏°. / ‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ: 0 ‡∏ö‡∏≤‡∏ó</p>

<script>
let records = [];

document.querySelectorAll("#startTime, #endTime").forEach(input => {
    input.addEventListener("input", (e) => {
        let v = e.target.value.replace(/[^0-9]/g, "");
        if (v.length >= 3) v = v.slice(0,2) + ":" + v.slice(2,4);
        e.target.value = v;
    });
});

function saveRecord() {
    const date = document.getElementById("workDate").value;
    const start = document.getElementById("startTime").value;
    const end = document.getElementById("endTime").value;
    const ot = parseFloat(document.getElementById("otRate").value);

    if(!date || !start || !end){
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤-‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
        return;
    }

    const sum = 500 + (ot > 0 ? (ot * 50) : 0); // OT: ‡∏ä‡∏°.‡∏•‡∏∞ 50 ‡∏ö‡∏≤‡∏ó

    records.push({ date, start, end, ot, sum });
    renderTable();
}

function renderTable() {
    const tbody = document.querySelector("#recordTable tbody");
    tbody.innerHTML = "";
    let total = 0, otTotal = 0;

    records.forEach((r, i) => {
        total += r.sum;
        otTotal += r.ot > 0 ? r.ot : 0;

        tbody.innerHTML += `
        <tr>
            <td>${i+1}</td>
            <td>${r.date}</td>
            <td>${r.start}</td>
            <td>${r.end}</td>
            <td>${r.ot == 0 ? "-" : r.ot}</td>
            <td>${r.sum}</td>
        </tr>`;
    });

    document.getElementById("summary").innerText =
        `‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: ${records.length} ‡∏ß‡∏±‡∏ô / OT: ${otTotal.toFixed(2)} ‡∏ä‡∏°. / ‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ: ${total} ‡∏ö‡∏≤‡∏ó`;
}

function exportCSV() {
    let csv = "‡∏•‡∏≥‡∏î‡∏±‡∏ö,‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà,‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤,‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å,OT,‡∏£‡∏ß‡∏°\n";
    records.forEach((r,i)=>{
        csv += `${i+1},${r.date},${r.start},${r.end},${r.ot},${r.sum}\n`;
    });

    const blob = new Blob([csv], {type: "text/csv;charset=utf-8;"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "work_record.csv";
    a.click();
}
</script>

</body>
</html>
