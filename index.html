<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á</title>
<style>
    body { font-family: Tahoma; margin: 20px; }
    input, select { padding: 6px; margin: 5px; }
    table { border-collapse: collapse; margin-top: 15px; width: 100%; }
    th, td { border: 1px solid #444; padding: 6px; text-align: center; }
    .container { display: flex; gap: 10px; flex-wrap: wrap; }
    .sumBox { margin-top: 15px; background:#e7e7e7; padding:10px; width:260px; }
</style>
</head>
<body>

<h2>üíº ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á + OT</h2>

<div class="container">
    <div>
        ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: <input type="date" id="dateInput">
    </div>
    <div>
        ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤: <input type="text" id="startInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô 09:00" maxlength="5">
    </div>
    <div>
        ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å: <input type="text" id="endInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô 17:30" maxlength="5">
    </div>
    <div>
        ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á/‡∏ä‡∏°: <input type="number" id="rateInput" value="50">
    </div>
    <div>
        OT: 
        <select id="otRate">
            <option value="0">‡πÑ‡∏°‡πà‡∏°‡∏µ OT</option>
            <option value="1.5">1.5</option>
            <option value="2.0">2.0</option>
            <option value="2.25">2.25</option>
        </select>
    </div>
</div>

<button onclick="saveData()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>

<table id="dataTable">
    <thead>
        <tr>
            <th>‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤</th>
            <th>‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</th>
            <th>‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏õ‡∏Å‡∏ï‡∏¥</th>
            <th>OT</th>
            <th>‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<div class="sumBox">
    ‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: <span id="totalDays">0</span> ‡∏ß‡∏±‡∏ô<br>
    ‡∏£‡∏ß‡∏°‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á OT: <span id="totalOT">0</span> ‡∏ä‡∏°.<br>
    ‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="totalMoney">0</span> ‡∏ö‡∏≤‡∏ó
</div>

<script>
let records = [];

function autoTimeColon(input){
    if(input.value.length === 2 && !input.value.includes(":")){
        input.value = input.value + ":";
    }
}

document.getElementById("startInput").addEventListener("input", e => autoTimeColon(e.target));
document.getElementById("endInput").addEventListener("input", e => autoTimeColon(e.target));

function toMinutes(t){
    let [h, m] = t.split(":").map(Number);
    return h * 60 + m;
}

function saveData(){
    const date = document.getElementById("dateInput").value;
    const start = document.getElementById("startInput").value;
    const end = document.getElementById("endInput").value;
    const rate = Number(document.getElementById("rateInput").value);
    const otRate = Number(document.getElementById("otRate").value);

    if(!date || !start || !end){
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
        return;
    }

    let diff = (toMinutes(end) - toMinutes(start)) / 60;
    if(diff < 0){ alert("‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤"); return; }

    let normalHours = Math.min(diff, 8);
    let otHours = diff > 8 ? diff - 8 : 0;

    let total = (normalHours * rate) + (otHours * rate * otRate);

    records.push({date, start, end, normalHours, otHours, total});
    render();
}

function render(){
    const tbody = document.querySelector("#dataTable tbody");
    tbody.innerHTML = "";

    let totalDays=records.length, totalOT=0, totalMoney=0;

    records.forEach((r,i)=>{
        totalOT += r.otHours;
        totalMoney += r.total;

        tbody.innerHTML += `
        <tr>
            <td>${i+1}</td>
            <td>${r.date}</td>
            <td>${r.start}</td>
            <td>${r.end}</td>
            <td>${r.normalHours.toFixed(2)}</td>
            <td>${r.otHours.toFixed(2)}</td>
            <td>${r.total.toFixed(2)}</td>
        </tr>`;
    });

    document.getElementById("totalDays").innerText = totalDays;
    document.getElementById("totalOT").innerText = totalOT.toFixed(2);
    document.getElementById("totalMoney").innerText = totalMoney.toFixed(2);
}
</script>

</body>
</html>